CREATE TABLE TB_DEMANDA
(
   ID         INTEGER        GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1),
   NOME       VARCHAR(30),
   ID_AREA    INTEGER,
   DESCRICAO  VARCHAR(255),
   UUID       VARCHAR(36)
);

ALTER TABLE TB_DEMANDA
   ADD PRIMARY KEY (ID);

CREATE INDEX SYS_IDX_15474
   ON TB_DEMANDA (ID_AREA ASC);


CREATE TABLE TB_DEMANDA_LISTA
(
   ID             INTEGER       GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1),
   ID_DEMANDA     INTEGER,
   ID_TIPO_LISTA  INTEGER,
   NOME           VARCHAR(30)
);

ALTER TABLE TB_DEMANDA_LISTA
   ADD PRIMARY KEY (ID);

CREATE INDEX SYS_IDX_10127
   ON TB_DEMANDA_LISTA (ID_TIPO_LISTA ASC);

CREATE INDEX SYS_IDX_10099
   ON TB_DEMANDA_LISTA (ID_DEMANDA ASC);


CREATE TABLE TB_TIPO_LISTA
(
   ID         INTEGER       GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1),
   DESCRICAO  VARCHAR(30)
);

ALTER TABLE TB_TIPO_LISTA
   ADD PRIMARY KEY (ID);

CREATE TABLE TB_DEMANDA_LISTA_ATIVIDADE
(
   ID                    INTEGER             GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1),
   ID_DEMANDA_LISTA      INTEGER,
   ID_STATUS_ATIVIDADE   INTEGER,
   NOME                  VARCHAR(100),
   DESCRICAO             VARCHAR(16777216),
   DATA_INCLUSAO         DATE,
   DATA_FINALIZACAO      DATE,
   UUID                  VARCHAR(36),
   USU_INCLUSAO          INTEGER,
   DATA_INICIO           DATE,
   DATA_INICIO_PREVISTO  DATE,
   DATA_FIM_PREVISTO     DATE
);

ALTER TABLE TB_DEMANDA_LISTA_ATIVIDADE
   ADD PRIMARY KEY (ID);

CREATE INDEX SYS_IDX_10130
   ON TB_DEMANDA_LISTA_ATIVIDADE (ID_STATUS_ATIVIDADE ASC);

CREATE INDEX SYS_IDX_10109
   ON TB_DEMANDA_LISTA_ATIVIDADE (ID_DEMANDA_LISTA ASC);


CREATE TABLE TB_STATUS_ATIVIDADE
(
   ID         INTEGER       GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1),
   DESCRICAO  VARCHAR(30)
);

ALTER TABLE TB_STATUS_ATIVIDADE
   ADD PRIMARY KEY (ID);

CREATE TABLE TB_USUARIO
(
   ID                    INTEGER        GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1),
   NOME                  VARCHAR(100),
   USUARIO               VARCHAR(100),
   SENHA                 VARCHAR(100),
   ID_ATIVIDADE_FAZENDO  INTEGER
);

ALTER TABLE TB_USUARIO
   ADD PRIMARY KEY (ID);

CREATE TABLE TB_DEMANDA_LISTA_ATIVIDADE_USUARIO
(
   ID                          INTEGER   GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1),
   ID_DEMANDA_LISTA_ATIVIDADE  INTEGER,
   ID_USUARIO                  INTEGER
);

ALTER TABLE TB_DEMANDA_LISTA_ATIVIDADE_USUARIO
   ADD PRIMARY KEY (ID);

CREATE INDEX SYS_IDX_10125
   ON TB_DEMANDA_LISTA_ATIVIDADE_USUARIO (ID_USUARIO ASC);

CREATE INDEX SYS_IDX_10123
   ON TB_DEMANDA_LISTA_ATIVIDADE_USUARIO (ID_DEMANDA_LISTA_ATIVIDADE ASC);


CREATE TABLE TB_AREA
(
   ID      INTEGER       GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1),
   NOME    VARCHAR(30),
   NIVEL   INTEGER,
   COLUNA  INTEGER
);

ALTER TABLE TB_AREA
   ADD PRIMARY KEY (ID);

CREATE TABLE TB_DEMANDA_TAREFA
(
   ID             INTEGER             GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1),
   ID_DEMANDA     INTEGER,
   NOME           VARCHAR(100)        NOT NULL,
   DESCRICAO      VARCHAR(16777216),
   UUID           VARCHAR(36),
   USU_INCLUSAO   INTEGER,
   DATA_INCLUSAO  DATE,
   CONTADOR       INTEGER
);

ALTER TABLE TB_DEMANDA_TAREFA
   ADD CONSTRAINT PK_DEMANDA_TAREFA
   PRIMARY KEY (ID);

CREATE INDEX SYS_IDX_44898
   ON TB_DEMANDA_TAREFA (ID_DEMANDA ASC);


CREATE TABLE TB_DEMANDA_TAREFA_DIARIA
(
   ID                 INTEGER   GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1),
   ID_DEMANDA_TAREFA  INTEGER,
   ID_USUARIO         INTEGER,
   DATA_ATUALIZACAO   DATE,
   CONTADOR_TAREFA    INTEGER   DEFAULT 1
);

ALTER TABLE TB_DEMANDA_TAREFA_DIARIA
   ADD PRIMARY KEY (ID);

CREATE INDEX SYS_IDX_76215
   ON TB_DEMANDA_TAREFA_DIARIA (ID_USUARIO ASC);

CREATE INDEX SYS_IDX_76212
   ON TB_DEMANDA_TAREFA_DIARIA (ID_DEMANDA_TAREFA ASC);


CREATE TABLE TB_DEMANDA_LISTA_ATIVIDADE_TEMPO
(
   ID            INTEGER   GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1),
   ID_ATIVIDADE  INTEGER,
   HORA_INICIO   TIME,
   HORA_FIM      TIME
);

ALTER TABLE TB_DEMANDA_LISTA_ATIVIDADE_TEMPO
   ADD PRIMARY KEY (ID);

CREATE INDEX SYS_IDX_122349
   ON TB_DEMANDA_LISTA_ATIVIDADE_TEMPO (ID_ATIVIDADE ASC);



ALTER TABLE TB_DEMANDA
  ADD CONSTRAINT FK_AREA_DEMANDA FOREIGN KEY (ID_AREA)
  REFERENCES TB_AREA (ID)
  ON UPDATE NO ACTION
  ON DELETE NO ACTION;

ALTER TABLE TB_DEMANDA_LISTA
  ADD CONSTRAINT FK_DEMANDA_LISTA FOREIGN KEY (ID_DEMANDA)
  REFERENCES TB_DEMANDA (ID)
  ON UPDATE NO ACTION
  ON DELETE NO ACTION;

ALTER TABLE TB_DEMANDA_LISTA
  ADD CONSTRAINT FK_TIPO_LISTA FOREIGN KEY (ID_TIPO_LISTA)
  REFERENCES TB_TIPO_LISTA (ID)
  ON UPDATE NO ACTION
  ON DELETE NO ACTION;

ALTER TABLE TB_DEMANDA_LISTA_ATIVIDADE
  ADD CONSTRAINT FK_DEMANDA_LISTA_ATIVIDADE FOREIGN KEY (ID_DEMANDA_LISTA)
  REFERENCES TB_DEMANDA_LISTA (ID)
  ON UPDATE NO ACTION
  ON DELETE NO ACTION;

ALTER TABLE TB_DEMANDA_LISTA_ATIVIDADE
  ADD CONSTRAINT FK_STATUS_ATIVIDADE FOREIGN KEY (ID_STATUS_ATIVIDADE)
  REFERENCES TB_STATUS_ATIVIDADE (ID)
  ON UPDATE NO ACTION
  ON DELETE NO ACTION;

ALTER TABLE TB_DEMANDA_LISTA_ATIVIDADE_USUARIO
  ADD CONSTRAINT FK_DEMANDA_LISTA_ATIVIDADE_USUARIO FOREIGN KEY (ID_DEMANDA_LISTA_ATIVIDADE)
  REFERENCES TB_DEMANDA_LISTA_ATIVIDADE (ID)
  ON UPDATE NO ACTION
  ON DELETE NO ACTION;

ALTER TABLE TB_DEMANDA_LISTA_ATIVIDADE_USUARIO
  ADD CONSTRAINT FK_ATIVIDADE_USUARIO FOREIGN KEY (ID_USUARIO)
  REFERENCES TB_USUARIO (ID)
  ON UPDATE NO ACTION
  ON DELETE NO ACTION;

ALTER TABLE TB_DEMANDA_TAREFA
  ADD CONSTRAINT FK_DEMANDA_TAREFA FOREIGN KEY (ID_DEMANDA)
  REFERENCES TB_DEMANDA (ID)
  ON UPDATE NO ACTION
  ON DELETE NO ACTION;

ALTER TABLE TB_DEMANDA_TAREFA_DIARIA
  ADD FOREIGN KEY (ID_DEMANDA_TAREFA)
  REFERENCES TB_DEMANDA_TAREFA (ID)
  ON UPDATE NO ACTION
  ON DELETE NO ACTION;

ALTER TABLE TB_DEMANDA_TAREFA_DIARIA
  ADD FOREIGN KEY (ID_USUARIO)
  REFERENCES TB_USUARIO (ID)
  ON UPDATE NO ACTION
  ON DELETE NO ACTION;

ALTER TABLE TB_DEMANDA_LISTA_ATIVIDADE_TEMPO
  ADD CONSTRAINT FK_DEMANDA_LISTA_ATIVIDADE_TEMPO FOREIGN KEY (ID_ATIVIDADE)
  REFERENCES TB_DEMANDA_LISTA_ATIVIDADE (ID)
  ON UPDATE NO ACTION
  ON DELETE NO ACTION;

